---
const { language } = Astro.props;

const prefix = language.prefix === "es" ? "" : `/${language.prefix}`;

const sections = [
  language.nav.experience,
  language.nav.projects,
  language.nav.about,
  language.nav.contact,
];
---

<header
  class="fixed top-0 z-10 flex items-center justify-center w-full mx-auto mt-2"
>
  <nav id="main-nav" class="flex px-4 py-2 text-sm font-medium rounded-full">
    <!--<a href={`${prefix}/${language.nav.home.href}`} class="inline-flex items-center">
      <img src="/logo.png" alt="Logo martinezdom" class="size-16"/>
    </a>-->
    <ul class="flex space-x-4">
      {
        sections.map((section) => (
          <li>
            <a href={`${prefix}/${section.href}`} class="text-blue-950 hover:text-white hover:underline underline-offset-4 dark:text-sky-500 dark:hover:text-white transition-colors duration-200">{section.title}</a>
          </li>
        ))
      }
    </ul>
  </nav>
</header>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const navBar = document.getElementById("main-nav");
    if (!navBar) return;

    const scrolledClasses = ["bg-white", "text-white", "dark:bg-black", "dark:text-black", "glitter"];
    const transparentClass = "bg-transparent";

    const toggleHeaderBackground = () => {
      if (window.scrollY > 50) {
        navBar.classList.remove(transparentClass, "text-blue-950", "dark:text-sky-500");
        navBar.classList.add(...scrolledClasses);
      } else {
        navBar.classList.remove(...scrolledClasses);
        navBar.classList.add(transparentClass);
      }
    };

    toggleHeaderBackground();

    window.addEventListener("scroll", toggleHeaderBackground);
  });
</script>
