---
const { language } = Astro.props;
---
<select name="language" id="language" class="bg-gray-700 text-white border dark:bg-white dark:text-black border-gray-300 rounded px-3 py-1 text-sm">
  <option value="en" selected={language.prefix === 'en'}>{language.english}</option>
  <option value="es" selected={language.prefix === 'es'}>{language.castilian}</option>
  <option value="va" selected={language.prefix === 'va'}>{language.valencian}</option>
</select>

<script>
  const selectElement = document.getElementById('language') as HTMLSelectElement;
  if (selectElement) {
    selectElement.addEventListener('change', (event) => {
      const selectedLanguage = (event.target as HTMLSelectElement).value;
      if (selectedLanguage === 'es') {
        window.location.href = '/';
      } else {
        window.location.href = `/${selectedLanguage}`;
      }
    });
  }
</script>
